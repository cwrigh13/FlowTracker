# FlowTracker AWS Lightsail Environment Variables Template
# Copy this file and fill in your actual values
# DO NOT commit this file with real values to version control

# ====================
# Application Settings
# ====================
NODE_ENV=production
PORT=5000

# ====================
# Database Configuration
# ====================
# Get these values from: lightsail-db-credentials.txt (created during deployment)
# Or run: aws lightsail get-relational-database --relational-database-name flowtracker-db
DATABASE_URL=postgresql://flowtrackeradmin:YOUR_PASSWORD_HERE@YOUR_DB_ENDPOINT.rds.amazonaws.com:5432/flowtracker

# ====================
# JWT Authentication
# ====================
# Generate a secure random string (32+ characters)
# PowerShell: -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | ForEach-Object {[char]$_})
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_AT_LEAST_32_CHARACTERS
JWT_EXPIRES_IN=7d

# ====================
# CORS & Frontend Configuration
# ====================
# Use your Lightsail container service URL or custom domain
# Get URL: aws lightsail get-container-services --service-name flowtracker --query 'containerServices[0].url'
CORS_ORIGIN=https://your-service-url.us-east-1.cs.amazonlightsail.com
FRONTEND_URL=https://your-service-url.us-east-1.cs.amazonlightsail.com

# ====================
# Email Configuration (Optional but recommended)
# ====================
# For Gmail: Enable 2FA and create an App Password
# Go to: https://myaccount.google.com/apppasswords

# SMTP Server (Gmail example)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587

# Your email credentials
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-gmail-app-password

# Sender email address (appears in "From" field)
FROM_EMAIL=noreply@yourdomain.com

# ====================
# File Upload Settings
# ====================
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=10485760

# ====================
# Rate Limiting
# ====================
# Window in milliseconds (900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ====================
# Optional: Logging Configuration
# ====================
LOG_LEVEL=info

# ====================
# Optional: Session Configuration
# ====================
SESSION_SECRET=CHANGE_THIS_TO_A_DIFFERENT_SECURE_RANDOM_STRING

# ====================
# Optional: Admin Configuration
# ====================
# Default admin email (for first setup)
ADMIN_EMAIL=admin@yourdomain.com

# ====================
# Notes & Instructions
# ====================

# 1. DATABASE_URL:
#    - Get from lightsail-db-credentials.txt (created by deploy-lightsail.ps1)
#    - Format: postgresql://username:password@host:5432/database
#    - Example: postgresql://flowtrackeradmin:abc123XYZ@flowtracker-db.c9z8s7j6k5l4.us-east-1.rds.amazonaws.com:5432/flowtracker

# 2. JWT_SECRET:
#    - Generate a secure random string (minimum 32 characters)
#    - PowerShell command: -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | ForEach-Object {[char]$_})
#    - Example: aB3dE5fG7hI9jK1lM3nO5pQ7rS9tU1vW3xY5zA7bC9dE

# 3. CORS_ORIGIN & FRONTEND_URL:
#    - Use your Lightsail container service URL (provided after deployment)
#    - Or your custom domain if you've set one up
#    - Must match exactly (including https://)

# 4. Email Setup:
#    a. Gmail:
#       - Enable 2-Factor Authentication
#       - Create App Password: https://myaccount.google.com/apppasswords
#       - Use the 16-character app password (not your regular Gmail password)
#    
#    b. SendGrid:
#       - SMTP_HOST=smtp.sendgrid.net
#       - SMTP_PORT=587
#       - SMTP_USER=apikey
#       - SMTP_PASS=your_sendgrid_api_key
#    
#    c. AWS SES:
#       - SMTP_HOST=email-smtp.us-east-1.amazonaws.com
#       - SMTP_PORT=587
#       - SMTP_USER=your_ses_smtp_username
#       - SMTP_PASS=your_ses_smtp_password

# 5. After filling in values:
#    - Update lightsail-containers.json with these values
#    - Or use this as reference when deploying
#    - Keep this file secure and never commit with real values!

# 6. To update environment variables after deployment:
#    - Edit lightsail-containers.json
#    - Run: .\deploy-lightsail.ps1 -UpdateOnly

